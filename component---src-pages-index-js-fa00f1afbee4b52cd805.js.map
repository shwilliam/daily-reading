{"version":3,"sources":["webpack:///./src/pages/index.js","webpack:///./node_modules/core-js/modules/es6.string.link.js","webpack:///./node_modules/core-js/modules/_string-html.js","webpack:///./node_modules/core-js/modules/es6.object.keys.js","webpack:///./node_modules/core-js/modules/_object-sap.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./node_modules/core-js/modules/_strict-method.js"],"names":["HomePage","_ref","data","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","className","role","flatten","arr","output","i","length","Array","isArray","concat","push","Object","keys","oneGraph","map","feedTitle","feed","rss2Feed","items","post","source","title","content","sort","_ref2","_ref3","postA","pubDate","_ref4","date","hours","minutes","ampm","strTime","titleKebab","split","word","toLowerCase","join","localData","window","localStorage","getItem","getLocalData","key","href","link","onClick","localOpenedArticles","JSON","parse","includes","setItem","stringify","target","rel","Date","getHours","getMinutes","getDate","getMonth","getFullYear","propTypes","PropTypes","shape","objectOf","arrayOf","string","isRequired","number","query","__webpack_require__","createHTML","url","this","$export","fails","defined","quot","tag","attribute","value","S","String","p1","replace","module","exports","NAME","exec","O","P","F","test","toObject","$keys","it","core","KEY","fn","exp","aFunction","$sort","undefined","comparefn","call","method","arg"],"mappings":"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","file":"component---src-pages-index-js-fa00f1afbee4b52cd805.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql } from 'gatsby'\nimport '../styles/tachyons.min.css'\n\nconst formatDate = (date) => {\n  let hours = date.getHours()\n  let minutes = date.getMinutes()\n  const ampm = hours >= 12 ? 'pm' : 'am'\n  hours = hours % 12\n  hours = hours || 12\n  minutes = minutes < 10 ? '0' + minutes : minutes\n  const strTime = hours + ':' + minutes + ' ' + ampm\n  return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()} ${strTime}`\n}\n\nconst flatten = (arr) => {\n  let output = []\n  for (var i = 0; i < arr.length; i++) {\n    if (Array.isArray(arr[i])) {\n      output = output.concat(flatten(arr[i]))\n    } else {\n      output.push(arr[i])\n    }\n  }\n  return output\n}\n\nconst getLocalData = () => {\n  if (typeof window !== 'undefined') {\n    return localStorage.getItem('opened_articles')\n  }\n}\n\nexport const HomePage = ({ data }) => {\n  return (<div className=\"lh-copy mw6 center ph3\">\n    <header className=\"tc\">\n      <h1 className=\"f1 lh-title mb0\">Reading list</h1>\n      <h2 className=\"f5 fw1\">\n      Recent articles from the Mozilla, Chrome, WebKit, SmashingMag, CSS Wizardry, Jake Archibald and Bram Stein\n      </h2>\n    </header>\n    <main role=\"main\">\n      <ul className=\"list pa0\">\n        {\n          flatten(Object.keys(data.oneGraph)\n            .map(feedTitle => {\n              const { rss2Feed: feed } = data.oneGraph[feedTitle]\n              return feed.items\n                .map(post => ({\n                  source: feed.title,\n                  content: post\n                }))\n            }))\n            .sort(({ content: postA }, { content: postB }) => {\n              return postB.pubDate - postA.pubDate\n            })\n            .map(({ source, content }) => {\n              const titleKebab = content.title.split(' ').map(word => word.toLowerCase()).join('-')\n              const localData = getLocalData()\n\n              return (\n                <li\n                  key={titleKebab}\n                  className=\"pv3 dim\"\n                >\n                  <a\n                    href={content.link}\n                    onClick={() => {\n                      if (localData) {\n                        const { data: localOpenedArticles } = JSON.parse(localData)\n\n                        if (!localOpenedArticles.includes(titleKebab)) {\n                          localStorage.setItem('opened_articles', JSON.stringify({\n                            data: [titleKebab, ...localOpenedArticles]\n                          }))\n                        }\n                      } else {\n                        localStorage.setItem('opened_articles', JSON.stringify({\n                          data: [titleKebab]\n                        }))\n                      }\n                    }}\n                    className={`link near-black ${JSON.parse(localData).data.includes(titleKebab) ? 'strike' : ''}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    <small>\n                      {formatDate(new Date(content.pubDate))}\n                    </small>\n                    <h3 className=\"ma0\">{content.title}</h3>\n                  </a>\n                </li>\n              )\n            })\n        }\n      </ul>\n    </main>\n    <footer></footer>\n  </div>\n  )\n}\nHomePage.propTypes = {\n  data: PropTypes.shape({\n    oneGraph: PropTypes.objectOf(\n      PropTypes.shape({\n        rss2Feed: PropTypes.shape({\n          items: PropTypes.arrayOf(\n            PropTypes.shape({\n              link: PropTypes.string.isRequired,\n              pubDate: PropTypes.number.isRequired,\n              title: PropTypes.string.isRequired\n            }).isRequired\n          ),\n          title: PropTypes.string.isRequired\n        }).isRequired\n      }).isRequired\n    ).isRequired\n  }).isRequired\n}\n\nexport default HomePage\n\nexport const query = graphql`\n  {\n    oneGraph {\n      mozilla: rss {\n        rss2Feed(url: \"https://hacks.mozilla.org/feed/\") {\n          ...RSSFeedFragment\n        }\n      }\n      chrome: rss {\n        rss2Feed(url: \"https://blog.google/products/chrome/rss/\") {\n          ...RSSFeedFragment\n        }\n      }\n      webkit: rss {\n        rss2Feed(url: \"https://webkit.org/feed/\") {\n          ...RSSFeedFragment\n        }\n      }\n      smashingMag: rss {\n        rss2Feed(url: \"https://www.smashingmagazine.com/feed/\") {\n          ...RSSFeedFragment\n        }\n      }\n      cssWizardry: rss {\n        rss2Feed(url: \"https://csswizardry.com/feed\") {\n          ...RSSFeedFragment\n        }\n      }\n      jakeArchibald: rss {\n        rss2Feed(url: \"https://jakearchibald.com/posts.rss\") {\n          ...RSSFeedFragment\n        }\n      }\n      bramStein: rss {\n        rss2Feed(url: \"https://www.bramstein.com/rss.xml\") {\n          ...RSSFeedFragment\n        }\n      }\n    }\n  }\n\n  fragment RSSFeedFragment on ONEGRAPH_Rss2Channel {\n    title\n    items {\n      title\n      link\n      pubDate\n    }\n  }\n`\n","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n"],"sourceRoot":""}